<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>星海探索者 | 深空控制中心</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600&family=Rajdhani:wght@500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ===== 全局样式重置 ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        :root {
            --primary: #00f7ff;
            --secondary: #9d4edd;
            --accent: #ff00cc;
            --warning: #ffb347;
            --danger: #ff4757;
            --success: #00ff9d;
            --dark: #0a0a1a;
            --darker: #050510;
            --card-bg: rgba(15, 20, 40, 0.85);
            --text: #e0f7ff;
            --text-secondary: #8a9eff;
            --border: rgba(0, 247, 255, 0.3);
            --glow: 0 0 20px rgba(0, 247, 255, 0.6);
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        body {
            font-family: 'Exo 2', sans-serif;
            background-color: var(--dark);
            color: var(--text);
            overflow: hidden;
            height: 100vh;
            position: relative;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(157, 78, 221, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 247, 255, 0.1) 0%, transparent 20%);
        }

        /* ===== 星空背景 ===== */
        #starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* ===== 主容器 ===== */
        .container {
            display: grid;
            grid-template-columns: 280px 1fr 350px;
            grid-template-rows: 80px 1fr 120px;
            height: 100vh;
            gap: 15px;
            padding: 15px;
            position: relative;
        }

        /* ===== 头部 ===== */
        .header {
            grid-column: 1 / -1;
            background: var(--card-bg);
            border-radius: 16px;
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            backdrop-filter: blur(10px);
            box-shadow: var(--glow);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 247, 255, 0.1), transparent);
            animation: headerScan 8s infinite linear;
        }

        @keyframes headerScan {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, var(--primary), transparent 70%);
            border-radius: 50%;
            position: relative;
            animation: pulseGlow 3s infinite alternate;
        }

        @keyframes pulseGlow {
            0% { box-shadow: 0 0 10px var(--primary); }
            100% { box-shadow: 0 0 30px var(--primary); }
        }

        .logo-icon::before {
            content: '✦';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            color: white;
        }

        .logo-text h1 {
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            font-size: 28px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 2px;
        }

        .logo-text p {
            font-size: 12px;
            color: var(--text-secondary);
            letter-spacing: 1px;
        }

        .mission-status {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            background: rgba(0, 255, 157, 0.1);
            border-radius: 20px;
            border: 1px solid var(--success);
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--success);
            animation: pulseDot 1.5s infinite;
        }

        @keyframes pulseDot {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .mission-time {
            font-family: 'Rajdhani', sans-serif;
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            text-shadow: 0 0 10px rgba(0, 247, 255, 0.5);
        }

        /* ===== 左侧导航 ===== */
        .sidebar {
            grid-row: 2;
            background: var(--card-bg);
            border-radius: 16px;
            border: 1px solid var(--border);
            padding: 25px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            backdrop-filter: blur(10px);
            overflow-y: auto;
        }

        .nav-section h3 {
            font-size: 16px;
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px;
            margin-bottom: 8px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid transparent;
            cursor: pointer;
            transition: var(--transition);
        }

        .nav-item:hover {
            background: rgba(0, 247, 255, 0.1);
            border-color: var(--primary);
            transform: translateX(5px);
        }

        .nav-item.active {
            background: rgba(0, 247, 255, 0.2);
            border-color: var(--primary);
            box-shadow: 0 0 15px rgba(0, 247, 255, 0.3);
        }

        .nav-item i {
            font-size: 18px;
            color: var(--primary);
            width: 24px;
            text-align: center;
        }

        .nav-item .badge {
            margin-left: auto;
            background: var(--accent);
            color: white;
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 10px;
        }

        /* ===== 飞船状态 ===== */
        .ship-status {
            margin-top: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            border: 1px solid rgba(255, 180, 71, 0.3);
        }

        .ship-status h4 {
            color: var(--warning);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin-bottom: 15px;
            overflow: hidden;
        }

        .status-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1.5s ease;
        }

        .hp { background: linear-gradient(90deg, var(--danger), #ff9f43); width: 82%; }
        .energy { background: linear-gradient(90deg, var(--primary), #00ccff); width: 67%; }
        .shield { background: linear-gradient(90deg, var(--secondary), #c56cf0); width: 95%; }

        /* ===== 主内容区 ===== */
        .main-content {
            grid-row: 2;
            background: var(--card-bg);
            border-radius: 16px;
            border: 1px solid var(--border);
            padding: 0;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .content-tabs {
            display: flex;
            background: rgba(0, 0, 0, 0.5);
            padding: 0 20px;
            border-bottom: 1px solid var(--border);
        }

        .tab {
            padding: 18px 25px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            position: relative;
            transition: var(--transition);
        }

        .tab.active {
            color: var(--primary);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary);
            box-shadow: 0 0 10px var(--primary);
        }

        .tab-content {
            padding: 30px;
            height: calc(100% - 60px);
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tab-content.active {
            display: block;
        }

        /* ===== 星系图 ===== */
        #galaxyCanvas {
            width: 100%;
            height: 100%;
            border-radius: 12px;
        }

        /* ===== 任务面板 ===== */
        .missions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            margin-top: 20px;
            max-height: 500px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .mission-card {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .mission-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .mission-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, var(--primary), var(--secondary));
        }

        .mission-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .mission-type {
            font-size: 12px;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 600;
        }

        .exploration { background: rgba(0, 247, 255, 0.2); color: var(--primary); }
        .combat { background: rgba(255, 71, 87, 0.2); color: var(--danger); }
        .research { background: rgba(157, 78, 221, 0.2); color: var(--secondary); }

        .mission-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .mission-progress {
            margin: 15px 0;
        }

        .progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 1s ease;
        }

        /* ===== 飞船控制 ===== */
        .control-panel {
            grid-row: 2;
            background: var(--card-bg);
            border-radius: 16px;
            border: 1px solid var(--border);
            padding: 25px;
            display: flex;
            flex-direction: column;
            gap: 25px;
            backdrop-filter: blur(10px);
            overflow-y: auto;
        }

        .control-group {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .control-group h3 {
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
        }

        .control-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .control-label {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .control-value {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            color: var(--primary);
            font-size: 18px;
        }

        .control-slider {
            width: 100%;
            margin: 15px 0;
            -webkit-appearance: none;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            outline: none;
        }

        .control-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            box-shadow: 0 0 10px var(--primary);
        }

        .control-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 20px;
        }

        .control-btn {
            padding: 14px;
            background: rgba(0, 247, 255, 0.1);
            border: 1px solid var(--border);
            color: var(--text);
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
        }

        .control-btn:hover {
            background: rgba(0, 247, 255, 0.3);
            border-color: var(--primary);
            transform: scale(1.05);
        }

        .control-btn i {
            font-size: 22px;
            color: var(--primary);
        }

        /* ===== 底部控制台 ===== */
        .console {
            grid-column: 1 / -1;
            background: var(--card-bg);
            border-radius: 16px;
            border: 1px solid var(--border);
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        .console-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .console-title {
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .console-output {
            height: 60px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: var(--success);
            overflow-y: auto;
            border: 1px solid rgba(0, 255, 157, 0.2);
            margin-bottom: 15px;
        }

        .console-input {
            display: flex;
            gap: 10px;
        }

        .console-input input {
            flex-grow: 1;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px 15px;
            color: var(--text);
            font-family: 'Courier New', monospace;
            outline: none;
        }

        .console-input input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(0, 247, 255, 0.3);
        }

        .console-input button {
            padding: 12px 25px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .console-input button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(0, 247, 255, 0.5);
        }

        /* ===== 特效元素 ===== */
        .particle {
            position: absolute;
            pointer-events: none;
            border-radius: 50%;
            z-index: -1;
        }

        /* ===== 响应式设计 ===== */
        @media (max-width: 1400px) {
            .container {
                grid-template-columns: 250px 1fr 300px;
            }
        }

        @media (max-width: 1100px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-rows: auto;
                overflow-y: auto;
                height: auto;
                min-height: 100vh;
            }
            
            .sidebar, .control-panel {
                grid-row: auto;
            }
            
            .missions-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ===== 滚动条样式 ===== */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary);
        }
    </style>
</head>
<body>
    <!-- 星空背景 -->
    <canvas id="starfield"></canvas>
    
    <!-- 主容器 -->
    <div class="container">
        <!-- 头部 -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon"></div>
                <div class="logo-text">
                    <h1>STELLAR EXPLORER</h1>
                    <p>深空探索控制中心 v3.2.1</p>
                </div>
            </div>
            
            <div class="mission-status">
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span>任务进行中</span>
                </div>
                <div class="mission-time">14:32:47</div>
            </div>
        </header>
        
        <!-- 左侧导航 -->
        <nav class="sidebar">
            <div class="nav-section">
                <h3><i class="fas fa-compass"></i> 导航</h3>
                <div class="nav-item active" data-tab="galaxy">
                    <i class="fas fa-globe-americas"></i>
                    <span>星系图</span>
                </div>
                <div class="nav-item" data-tab="missions">
                    <i class="fas fa-tasks"></i>
                    <span>任务日志</span>
                    <div class="badge">3</div>
                </div>
                <div class="nav-item" data-tab="ship">
                    <i class="fas fa-space-shuttle"></i>
                    <span>飞船状态</span>
                </div>
                <div class="nav-item" data-tab="inventory">
                    <i class="fas fa-box-open"></i>
                    <span>物资仓库</span>
                </div>
                <div class="nav-item" data-tab="crew">
                    <i class="fas fa-users"></i>
                    <span>船员管理</span>
                </div>
            </div>
            
            <div class="nav-section">
                <h3><i class="fas fa-satellite"></i> 系统</h3>
                <div class="nav-item" data-tab="comms">
                    <i class="fas fa-broadcast-tower"></i>
                    <span>通讯网络</span>
                </div>
                <div class="nav-item" data-tab="sensors">
                    <i class="fas fa-radar"></i>
                    <span>传感器阵列</span>
                    <div class="badge">!</div>
                </div>
                <div class="nav-item" data-tab="research">
                    <i class="fas fa-flask"></i>
                    <span>科研数据库</span>
                </div>
            </div>
            
            <div class="ship-status">
                <h4><i class="fas fa-heartbeat"></i> 飞船状态</h4>
                <div class="status-item">
                    <div class="status-label">船体完整性</div>
                    <div class="status-bar">
                        <div class="status-fill hp"></div>
                    </div>
                </div>
                <div class="status-item">
                    <div class="status-label">能量核心</div>
                    <div class="status-bar">
                        <div class="status-fill energy"></div>
                    </div>
                </div>
                <div class="status-item">
                    <div class="status-label">护盾强度</div>
                    <div class="status-bar">
                        <div class="status-fill shield"></div>
                    </div>
                </div>
            </div>
        </nav>
        
        <!-- 主内容区 -->
        <main class="main-content">
            <div class="content-tabs">
                <button class="tab active" data-tab="galaxy">星系图</button>
                <button class="tab" data-tab="missions">任务日志</button>
                <button class="tab" data-tab="ship">飞船状态</button>
                <button class="tab" data-tab="inventory">物资仓库</button>
                <button class="tab" data-tab="crew">船员管理</button>
            </div>
            
            <!-- 星系图 -->
            <div class="tab-content active" id="galaxy-tab">
                <canvas id="galaxyCanvas"></canvas>
            </div>
            
            <!-- 任务日志 -->
            <div class="tab-content" id="missions-tab">
                <h2 style="color: var(--primary); margin-bottom: 25px;">当前任务</h2>
                <div class="missions-grid" id="missionsContainer">
                    <!-- 任务卡片将通过JS动态生成 -->
                </div>
            </div>
            
            <!-- 飞船状态 -->
            <div class="tab-content" id="ship-tab">
                <h2 style="color: var(--primary); margin-bottom: 25px;">飞船状态详情</h2>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                    <div class="control-group">
                        <h3><i class="fas fa-cogs"></i> 动力系统</h3>
                        <div class="control-row">
                            <span class="control-label">曲速引擎</span>
                            <span class="control-value">94%</span>
                        </div>
                        <div class="control-row">
                            <span class="control-label">脉冲引擎</span>
                            <span class="control-value">100%</span>
                        </div>
                        <div class="control-row">
                            <span class="control-label">反物质反应堆</span>
                            <span class="control-value">87%</span>
                        </div>
                        <input type="range" class="control-slider" value="87" min="0" max="100">
                    </div>
                    
                    <div class="control-group">
                        <h3><i class="fas fa-shield-alt"></i> 防御系统</h3>
                        <div class="control-row">
                            <span class="control-label">偏导护盾</span>
                            <span class="control-value">95%</span>
                        </div>
                        <div class="control-row">
                            <span class="control-label">装甲完整性</span>
                            <span class="control-value">82%</span>
                        </div>
                        <div class="control-row">
                            <span class="control-label">点防御系统</span>
                            <span class="control-value">100%</span>
                        </div>
                        <div class="control-buttons">
                            <button class="control-btn">
                                <i class="fas fa-shield-virus"></i>
                                <span>护盾充能</span>
                            </button>
                            <button class="control-btn">
                                <i class="fas fa-sync-alt"></i>
                                <span>系统自检</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 物资仓库 -->
            <div class="tab-content" id="inventory-tab">
                <h2 style="color: var(--primary); margin-bottom: 25px;">物资仓库</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px;">
                    <!-- 物资项目将通过JS动态生成 -->
                </div>
            </div>
            
            <!-- 船员管理 -->
            <div class="tab-content" id="crew-tab">
                <h2 style="color: var(--primary); margin-bottom: 25px;">船员管理</h2>
                <div id="crewContainer" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
                    <!-- 船员卡片将通过JS动态生成 -->
                </div>
            </div>
        </main>
        
        <!-- 右侧控制面板 -->
        <aside class="control-panel">
            <div class="control-group">
                <h3><i class="fas fa-rocket"></i> 飞行控制</h3>
                <div class="control-row">
                    <span class="control-label">当前速度</span>
                    <span class="control-value" id="speedValue">0.5c</span>
                </div>
                <input type="range" class="control-slider" id="speedSlider" value="50" min="0" max="100">
                
                <div class="control-row">
                    <span class="control-label">航向</span>
                    <span class="control-value" id="headingValue">α-Centauri</span>
                </div>
                
                <div class="control-buttons">
                    <button class="control-btn" id="warpBtn">
                        <i class="fas fa-forward"></i>
                        <span>曲速航行</span>
                    </button>
                    <button class="control-btn" id="stopBtn">
                        <i class="fas fa-stop"></i>
                        <span>紧急停止</span>
                    </button>
                </div>
            </div>
            
            <div class="control-group">
                <h3><i class="fas fa-solar-panel"></i> 能源分配</h3>
                <div class="control-row">
                    <span class="control-label">引擎</span>
                    <span class="control-value" id="enginePower">45%</span>
                </div>
                <input type="range" class="control-slider" id="engineSlider" value="45" min="0" max="100">
                
                <div class="control-row">
                    <span class="control-label">护盾</span>
                    <span class="control-value" id="shieldPower">30%</span>
                </div>
                <input type="range" class="control-slider" id="shieldSlider" value="30" min="0" max="100">
                
                <div class="control-row">
                    <span class="control-label">武器</span>
                    <span class="control-value" id="weaponPower">25%</span>
                </div>
                <input type="range" class="control-slider" id="weaponSlider" value="25" min="0" max="100">
            </div>
            
            <div class="control-group">
                <h3><i class="fas fa-exclamation-triangle"></i> 警报系统</h3>
                <div id="alertsContainer">
                    <!-- 警报将通过JS动态生成 -->
                </div>
                <div class="control-buttons">
                    <button class="control-btn" id="silenceAlerts">
                        <i class="fas fa-volume-mute"></i>
                        <span>静音警报</span>
                    </button>
                    <button class="control-btn" id="scanArea">
                        <i class="fas fa-search"></i>
                        <span>区域扫描</span>
                    </button>
                </div>
            </div>
        </aside>
        
        <!-- 底部控制台 -->
        <footer class="console">
            <div class="console-header">
                <div class="console-title">
                    <i class="fas fa-terminal"></i>
                    <span>深空通讯控制台</span>
                </div>
                <div style="color: var(--text-secondary); font-size: 14px;">
                    连接状态: <span style="color: var(--success);">稳定</span>
                </div>
            </div>
            
            <div class="console-output" id="consoleOutput">
                > 系统初始化完成<br>
                > 所有传感器在线<br>
                > 曲速引擎准备就绪<br>
                > 深空扫描启动...<br>
            </div>
            
            <div class="console-input">
                <input type="text" id="consoleInput" placeholder="输入指令 (输入 'help' 查看命令列表)...">
                <button id="consoleSubmit">发送</button>
            </div>
        </footer>
    </div>

    <!-- JavaScript代码 -->
    <script>
        // ===== 初始化函数 =====
        document.addEventListener('DOMContentLoaded', function() {
            console.log('深空探索系统初始化...');
            
            // 初始化所有模块
            initStarfield();
            initGalaxy();
            initNavigation();
            initMissions();
            initConsole();
            initControls();
            initAlerts();
            initCrew();
            initInventory();
            
            // 启动任务时间
            startMissionTimer();
            
            // 创建粒子特效
            createParticles();
            
            console.log('系统初始化完成，所有模块已启动');
            addConsoleMessage('> 深空探索控制中心 v3.2.1 启动完成');
            addConsoleMessage('> 欢迎回来，指挥官');
        });

        // ===== 1. 星空背景 =====
        function initStarfield() {
            const canvas = document.getElementById('starfield');
            const ctx = canvas.getContext('2d');
            
            // 设置画布尺寸
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // 创建星星
            const stars = [];
            const starCount = 400;
            
            class Star {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.size = Math.random() * 2 + 0.1;
                    this.speed = Math.random() * 0.5 + 0.1;
                    this.brightness = Math.random() * 0.5 + 0.5;
                    this.twinkleSpeed = Math.random() * 0.05 + 0.01;
                    this.twinkleOffset = Math.random() * Math.PI * 2;
                }
                
                update() {
                    // 星星移动（向右）
                    this.x += this.speed;
                    if (this.x > canvas.width) {
                        this.x = 0;
                        this.y = Math.random() * canvas.height;
                    }
                    
                    // 闪烁效果
                    this.brightness = 0.5 + 0.5 * Math.sin(Date.now() * this.twinkleSpeed + this.twinkleOffset);
                }
                
                draw() {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    
                    // 创建径向渐变实现发光效果
                    const gradient = ctx.createRadialGradient(
                        this.x, this.y, 0,
                        this.x, this.y, this.size * 3
                    );
                    gradient.addColorStop(0, `rgba(255, 255, 255, ${this.brightness})`);
                    gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
                    
                    ctx.fillStyle = gradient;
                    ctx.fill();
                }
            }
            
            // 初始化星星
            for (let i = 0; i < starCount; i++) {
                stars.push(new Star());
            }
            
            // 添加一些彩色星云
            function drawNebula() {
                // 蓝色星云
                const blueGradient = ctx.createRadialGradient(
                    canvas.width * 0.2, canvas.height * 0.3, 0,
                    canvas.width * 0.2, canvas.height * 0.3, canvas.width * 0.3
                );
                blueGradient.addColorStop(0, 'rgba(0, 247, 255, 0.1)');
                blueGradient.addColorStop(1, 'rgba(0, 247, 255, 0)');
                
                ctx.fillStyle = blueGradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // 紫色星云
                const purpleGradient = ctx.createRadialGradient(
                    canvas.width * 0.8, canvas.height * 0.7, 0,
                    canvas.width * 0.8, canvas.height * 0.7, canvas.width * 0.4
                );
                purpleGradient.addColorStop(0, 'rgba(157, 78, 221, 0.1)');
                purpleGradient.addColorStop(1, 'rgba(157, 78, 221, 0)');
                
                ctx.fillStyle = purpleGradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }
            
            // 动画循环
            function animate() {
                // 清除画布，使用半透明黑色实现拖尾效果
                ctx.fillStyle = 'rgba(10, 10, 26, 0.1)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // 绘制星云
                drawNebula();
                
                // 更新和绘制星星
                stars.forEach(star => {
                    star.update();
                    star.draw();
                });
                
                requestAnimationFrame(animate);
            }
            
            animate();
        }

        // ===== 2. 交互式星系图 =====
        function initGalaxy() {
            const canvas = document.getElementById('galaxyCanvas');
            const ctx = canvas.getContext('2d');
            
            // 设置画布尺寸
            function resizeCanvas() {
                canvas.width = canvas.parentElement.clientWidth;
                canvas.height = canvas.parentElement.clientHeight;
            }
            
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // 星系数据
            const stars = [];
            const planets = [];
            const nebulas = [];
            
            // 鼠标交互
            let mouseX = canvas.width / 2;
            let mouseY = canvas.height / 2;
            let selectedStar = null;
            
            canvas.addEventListener('mousemove', (e) => {
                const rect = canvas.getBoundingClientRect();
                mouseX = e.clientX - rect.left;
                mouseY = e.clientY - rect.top;
                
                // 检查是否悬停在星星上
                selectedStar = null;
                for (const star of stars) {
                    const dx = star.x - mouseX;
                    const dy = star.y - mouseY;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < star.radius + 10) {
                        selectedStar = star;
                        break;
                    }
                }
            });
            
            canvas.addEventListener('click', () => {
                if (selectedStar) {
                    addConsoleMessage(`> 选择恒星系统: ${selectedStar.name}`);
                    addConsoleMessage(`> 类型: ${selectedStar.type}`);
                    addConsoleMessage(`> 距离: ${selectedStar.distance} 光年`);
                    
                    // 显示警报
                    addAlert(`扫描 ${selectedStar.name}`, `正在分析恒星系统数据...`, 'info');
                }
            });
            
            // 创建随机星星
            function createStars() {
                for (let i = 0; i < 150; i++) {
                    stars.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        radius: Math.random() * 4 + 1,
                        brightness: Math.random() * 0.8 + 0.2,
                        speed: Math.random() * 0.5 + 0.1,
                        type: ['O', 'B', 'A', 'F', 'G', 'K', 'M'][Math.floor(Math.random() * 7)],
                        name: `HIP-${Math.floor(Math.random() * 90000) + 10000}`,
                        distance: (Math.random() * 900 + 100).toFixed(1),
                        color: getStarColor()
                    });
                }
                
                // 添加一些特殊星星
                stars.push({
                    x: canvas.width * 0.3,
                    y: canvas.height * 0.4,
                    radius: 8,
                    brightness: 1,
                    speed: 0.2,
                    type: 'G',
                    name: 'SOL',
                    distance: '0.0',
                    color: '#FFD700',
                    special: true
                });
                
                stars.push({
                    x: canvas.width * 0.7,
                    y: canvas.height * 0.6,
                    radius: 10,
                    brightness: 1,
                    speed: 0.1,
                    type: 'B',
                    name: 'SIRIUS',
                    distance: '8.6',
                    color: '#00BFFF',
                    special: true
                });
            }
            
            function getStarColor() {
                const colors = [
                    '#87CEEB', // 蓝色
                    '#ADD8E6', // 浅蓝
                    '#FFFFFF', // 白色
                    '#FFD700', // 金色
                    '#FFA500', // 橙色
                    '#FF6347', // 红色
                    '#E6E6FA'  // 淡紫色
                ];
                return colors[Math.floor(Math.random() * colors.length)];
            }
            
            // 创建行星
            function createPlanets() {
                for (let i = 0; i < 20; i++) {
                    planets.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        radius: Math.random() * 15 + 5,
                        speed: Math.random() * 0.02 + 0.01,
                        angle: Math.random() * Math.PI * 2,
                        distance: Math.random() * 80 + 20,
                        color: getPlanetColor(),
                        hasRings: Math.random() > 0.7
                    });
                }
            }
            
            function getPlanetColor() {
                const colors = [
                    '#4682B4', // 钢蓝
                    '#32CD32', // 石灰绿
                    '#8B4513', // 棕色
                    '#FFD700', // 金色
                    '#FF6347', // 番茄红
                    '#9370DB', // 中紫色
                    '#20B2AA'  // 浅海绿
                ];
                return colors[Math.floor(Math.random() * colors.length)];
            }
            
            // 绘制星系
            function drawGalaxy() {
                // 清除画布
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // 绘制星云背景
                drawNebulaBackground();
                
                // 绘制星星
                stars.forEach(star => {
                    // 更新位置（轻微移动）
                    star.x += Math.sin(Date.now() * 0.001 * star.speed) * 0.1;
                    star.y += Math.cos(Date.now() * 0.001 * star.speed) * 0.1;
                    
                    // 边界检查
                    if (star.x < 0) star.x = canvas.width;
                    if (star.x > canvas.width) star.x = 0;
                    if (star.y < 0) star.y = canvas.height;
                    if (star.y > canvas.height) star.y = 0;
                    
                    // 绘制星星
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                    
                    // 创建发光效果
                    const gradient = ctx.createRadialGradient(
                        star.x, star.y, 0,
                        star.x, star.y, star.radius * 3
                    );
                    
                    if (star === selectedStar) {
                        gradient.addColorStop(0, '#FFFFFF');
                        gradient.addColorStop(0.5, star.color);
                        gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
                        
                        // 绘制选择光环
                        ctx.beginPath();
                        ctx.arc(star.x, star.y, star.radius + 15, 0, Math.PI * 2);
                        ctx.strokeStyle = 'rgba(0, 247, 255, 0.7)';
                        ctx.lineWidth = 2;
                        ctx.stroke();
                        
                        // 绘制星星名称
                        ctx.fillStyle = '#FFFFFF';
                        ctx.font = '14px Orbitron';
                        ctx.textAlign = 'center';
                        ctx.fillText(star.name, star.x, star.y - star.radius - 20);
                        
                        // 绘制距离
                        ctx.font = '12px Exo 2';
                        ctx.fillStyle = '#8a9eff';
                        ctx.fillText(`${star.distance} 光年`, star.x, star.y - star.radius - 5);
                    } else {
                        gradient.addColorStop(0, `rgba(255, 255, 255, ${star.brightness})`);
                        gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
                    }
                    
                    ctx.fillStyle = gradient;
                    ctx.fill();
                    
                    // 特殊星星的额外效果
                    if (star.special) {
                        ctx.beginPath();
                        ctx.arc(star.x, star.y, star.radius + 8, 0, Math.PI * 2);
                        ctx.strokeStyle = `rgba(255, 215, 0, 0.5)`;
                        ctx.lineWidth = 1;
                        ctx.stroke();
                    }
                });
                
                // 绘制行星
                planets.forEach(planet => {
                    planet.angle += planet.speed;
                    
                    const planetX = planet.x + Math.cos(planet.angle) * planet.distance;
                    const planetY = planet.y + Math.sin(planet.angle) * planet.distance;
                    
                    // 绘制行星
                    ctx.beginPath();
                    ctx.arc(planetX, planetY, planet.radius, 0, Math.PI * 2);
                    
                    // 行星渐变
                    const planetGradient = ctx.createRadialGradient(
                        planetX - planet.radius/3, planetY - planet.radius/3, 0,
                        planetX, planetY, planet.radius
                    );
                    planetGradient.addColorStop(0, lightenColor(planet.color, 30));
                    planetGradient.addColorStop(1, planet.color);
                    
                    ctx.fillStyle = planetGradient;
                    ctx.fill();
                    
                    // 绘制行星环
                    if (planet.hasRings) {
                        ctx.beginPath();
                        ctx.ellipse(planetX, planetY, planet.radius * 2, planet.radius * 0.5, planet.angle, 0, Math.PI * 2);
                        ctx.strokeStyle = 'rgba(210, 180, 140, 0.7)';
                        ctx.lineWidth = 3;
                        ctx.stroke();
                        
                        ctx.beginPath();
                        ctx.ellipse(planetX, planetY, planet.radius * 2.2, planet.radius * 0.6, planet.angle + 0.5, 0, Math.PI * 2);
                        ctx.strokeStyle = 'rgba(160, 130, 110, 0.5)';
                        ctx.lineWidth = 2;
                        ctx.stroke();
                    }
                    
                    // 绘制轨道
                    ctx.beginPath();
                    ctx.ellipse(planet.x, planet.y, planet.distance, planet.distance * 0.3, 0, 0, Math.PI * 2);
                    ctx.strokeStyle = 'rgba(0, 247, 255, 0.1)';
                    ctx.lineWidth = 1;
                    ctx.stroke();
                });
                
                // 绘制飞船（玩家位置）
                const shipX = canvas.width * 0.5 + Math.cos(Date.now() * 0.0005) * 100;
                const shipY = canvas.height * 0.5 + Math.sin(Date.now() * 0.0005) * 100;
                
                drawShip(shipX, shipY);
                
                // 绘制扫描线效果
                drawScanLine();
                
                // 绘制网格
                drawGrid();
                
                requestAnimationFrame(drawGalaxy);
            }
            
            function drawNebulaBackground() {
                // 创建星云效果
                const time = Date.now() * 0.0001;
                
                for (let i = 0; i < 5; i++) {
                    const x = canvas.width * 0.2 + Math.sin(time + i) * 50;
                    const y = canvas.height * 0.3 + Math.cos(time + i * 0.7) * 50;
                    const radius = canvas.width * 0.15;
                    
                    const gradient = ctx.createRadialGradient(x, y, 0, x, y, radius);
                    gradient.addColorStop(0, `rgba(${i * 50}, ${100 + i * 30}, 255, 0.1)`);
                    gradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
                    
                    ctx.fillStyle = gradient;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                }
            }
            
            function drawShip(x, y) {
                // 绘制飞船
                ctx.save();
                ctx.translate(x, y);
                ctx.rotate(Date.now() * 0.001);
                
                // 飞船主体
                ctx.beginPath();
                ctx.moveTo(0, -15);
                ctx.lineTo(10, 10);
                ctx.lineTo(0, 5);
                ctx.lineTo(-10, 10);
                ctx.closePath();
                
                const shipGradient = ctx.createLinearGradient(-10, -15, 10, 10);
                shipGradient.addColorStop(0, '#00f7ff');
                shipGradient.addColorStop(1, '#0066ff');
                
                ctx.fillStyle = shipGradient;
                ctx.fill();
                
                // 飞船引擎光
                ctx.beginPath();
                ctx.moveTo(-5, 10);
                ctx.lineTo(0, 25);
                ctx.lineTo(5, 10);
                ctx.closePath();
                
                const engineGradient = ctx.createLinearGradient(0, 10, 0, 25);
                engineGradient.addColorStop(0, '#ffaa00');
                engineGradient.addColorStop(1, 'rgba(255, 170, 0, 0)');
                
                ctx.fillStyle = engineGradient;
                ctx.fill();
                
                // 飞船光环
                ctx.beginPath();
                ctx.arc(0, 0, 25, 0, Math.PI * 2);
                ctx.strokeStyle = 'rgba(0, 247, 255, 0.3)';
                ctx.lineWidth = 1;
                ctx.stroke();
                
                ctx.restore();
                
                // 绘制飞船轨迹
                ctx.beginPath();
                ctx.moveTo(x, y);
                ctx.lineTo(
                    x - Math.cos(Date.now() * 0.001) * 50,
                    y - Math.sin(Date.now() * 0.001) * 50
                );
                
                const trailGradient = ctx.createLinearGradient(x, y, 
                    x - Math.cos(Date.now() * 0.001) * 50, 
                    y - Math.sin(Date.now() * 0.001) * 50);
                trailGradient.addColorStop(0, 'rgba(0, 247, 255, 0.8)');
                trailGradient.addColorStop(1, 'rgba(0, 247, 255, 0)');
                
                ctx.strokeStyle = trailGradient;
                ctx.lineWidth = 3;
                ctx.stroke();
            }
            
            function drawScanLine() {
                const scanY = (Date.now() * 0.05) % canvas.height;
                
                ctx.beginPath();
                ctx.rect(0, scanY - 1, canvas.width, 2);
                
                const scanGradient = ctx.createLinearGradient(0, scanY - 1, 0, scanY + 1);
                scanGradient.addColorStop(0, 'rgba(0, 247, 255, 0)');
                scanGradient.addColorStop(0.5, 'rgba(0, 247, 255, 0.7)');
                scanGradient.addColorStop(1, 'rgba(0, 247, 255, 0)');
                
                ctx.fillStyle = scanGradient;
                ctx.fill();
            }
            
            function drawGrid() {
                ctx.strokeStyle = 'rgba(0, 247, 255, 0.1)';
                ctx.lineWidth = 0.5;
                
                // 垂直线
                for (let x = 0; x < canvas.width; x += 50) {
                    ctx.beginPath();
                    ctx.moveTo(x, 0);
                    ctx.lineTo(x, canvas.height);
                    ctx.stroke();
                }
                
                // 水平线
                for (let y = 0; y < canvas.height; y += 50) {
                    ctx.beginPath();
                    ctx.moveTo(0, y);
                    ctx.lineTo(canvas.width, y);
                    ctx.stroke();
                }
                
                // 中心十字
                ctx.strokeStyle = 'rgba(0, 247, 255, 0.3)';
                ctx.lineWidth = 1;
                
                ctx.beginPath();
                ctx.moveTo(canvas.width / 2, 0);
                ctx.lineTo(canvas.width / 2, canvas.height);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(0, canvas.height / 2);
                ctx.lineTo(canvas.width, canvas.height / 2);
                ctx.stroke();
            }
            
            function lightenColor(color, percent) {
                const num = parseInt(color.replace("#", ""), 16);
                const amt = Math.round(2.55 * percent);
                const R = (num >> 16) + amt;
                const G = (num >> 8 & 0x00FF) + amt;
                const B = (num & 0x0000FF) + amt;
                
                return `#${(
                    0x1000000 + 
                    (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + 
                    (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 + 
                    (B < 255 ? B < 1 ? 0 : B : 255)
                ).toString(16).slice(1)}`;
            }
            
            // 初始化星系
            createStars();
            createPlanets();
            drawGalaxy();
        }

        // ===== 3. 导航系统 =====
        function initNavigation() {
            // 左侧导航
            const navItems = document.querySelectorAll('.nav-item');
            const tabs = document.querySelectorAll('.tab');
            
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // 更新导航项状态
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    // 更新标签页状态
                    tabs.forEach(tab => {
                        tab.classList.remove('active');
                        if (tab.getAttribute('data-tab') === tabId) {
                            tab.classList.add('active');
                        }
                    });
                    
                    // 显示对应内容
                    showTabContent(tabId);
                });
            });
            
            // 顶部标签页
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // 更新标签页状态
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // 更新导航项状态
                    navItems.forEach(nav => {
                        nav.classList.remove('active');
                        if (nav.getAttribute('data-tab') === tabId) {
                            nav.classList.add('active');
                        }
                    });
                    
                    // 显示对应内容
                    showTabContent(tabId);
                });
            });
            
            function showTabContent(tabId) {
                // 隐藏所有内容
                const tabContents = document.querySelectorAll('.tab-content');
                tabContents.forEach(content => {
                    content.classList.remove('active');
                });
                
                // 显示目标内容
                const targetContent = document.getElementById(`${tabId}-tab`);
                if (targetContent) {
                    targetContent.classList.add('active');
                }
            }
        }

        // ===== 4. 任务系统 =====
        function initMissions() {
            const missionsContainer = document.getElementById('missionsContainer');
            
            const missions = [
                {
                    id: 1,
                    title: "探索柯伊伯带",
                    type: "exploration",
                    description: "调查柯伊伯带异常能量读数，收集冰质天体样本。",
                    progress: 75,
                    reward: "1500 资源单位",
                    timeRemaining: "2小时15分"
                },
                {
                    id: 2,
                    title: "防御海盗袭击",
                    type: "combat",
                    description: "击退骚扰贸易航线的海盗舰队，保护民用运输船。",
                    progress: 30,
                    reward: "3000 资源单位",
                    timeRemaining: "1小时05分"
                },
                {
                    id: 3,
                    title: "分析外星信号",
                    type: "research",
                    description: "解码从深空接收到的非人类文明信号。",
                    progress: 45,
                    reward: "2200 资源单位",
                    timeRemaining: "3小时40分"
                },
                {
                    id: 4,
                    title: "维修空间站模块",
                    type: "repair",
                    description: "协助联盟空间站维修受损的生命支持系统。",
                    progress: 90,
                    reward: "1800 资源单位",
                    timeRemaining: "45分"
                },
                {
                    id: 5,
                    title: "采集稀有矿物",
                    type: "mining",
                    description: "在小行星带开采稀有矿物 Tritanium。",
                    progress: 60,
                    reward: "2500 资源单位",
                    timeRemaining: "4小时20分"
                }
            ];
            
            // 渲染任务卡片
            missions.forEach(mission => {
                const missionCard = document.createElement('div');
                missionCard.className = 'mission-card';
                
                missionCard.innerHTML = `
                    <div class="mission-header">
                        <h3 class="mission-title">${mission.title}</h3>
                        <span class="mission-type ${mission.type}">${getMissionTypeText(mission.type)}</span>
                    </div>
                    <p style="color: var(--text-secondary); margin-bottom: 15px; font-size: 14px; line-height: 1.5;">
                        ${mission.description}
                    </p>
                    <div class="mission-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${mission.progress}%"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 12px;">
                            <span>进度: ${mission.progress}%</span>
                            <span>剩余: ${mission.timeRemaining}</span>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <div>
                            <i class="fas fa-award" style="color: var(--warning); margin-right: 5px;"></i>
                            <span style="font-size: 14px;">奖励: ${mission.reward}</span>
                        </div>
                        <button class="control-btn" style="padding: 8px 15px; font-size: 12px;" onclick="focusMission(${mission.id})">
                            <i class="fas fa-crosshairs"></i>
                            <span>追踪</span>
                        </button>
                    </div>
                `;
                
                missionsContainer.appendChild(missionCard);
            });
            
            // 模拟任务进度更新
            setInterval(() => {
                const progressBars = document.querySelectorAll('.progress-fill');
                progressBars.forEach(bar => {
                    const currentWidth = parseFloat(bar.style.width);
                    if (currentWidth < 100) {
                        const newWidth = Math.min(currentWidth + Math.random() * 2, 100);
                        bar.style.width = `${newWidth}%`;
                        
                        // 更新进度文本
                        const parentCard = bar.closest('.mission-card');
                        if (parentCard) {
                            const progressText = parentCard.querySelector('span');
                            if (progressText && progressText.textContent.includes('进度:')) {
                                const newProgress = Math.round(newWidth);
                                progressText.textContent = `进度: ${newProgress}%`;
                            }
                        }
                    }
                });
            }, 5000);
        }
        
        function getMissionTypeText(type) {
            const typeMap = {
                exploration: '探索',
                combat: '战斗',
                research: '研究',
                repair: '维修',
                mining: '采矿'
            };
            return typeMap[type] || type;
        }
        
        function focusMission(missionId) {
            addConsoleMessage(`> 正在追踪任务 #${missionId}`);
            addAlert('任务追踪', `已锁定任务 #${missionId}，正在导航至目标区域...`, 'info');
        }

        // ===== 5. 控制台系统 =====
        function initConsole() {
            const consoleInput = document.getElementById('consoleInput');
            const consoleSubmit = document.getElementById('consoleSubmit');
            const consoleOutput = document.getElementById('consoleOutput');
            
            // 命令历史
            const commandHistory = [];
            let historyIndex = -1;
            
            // 可用命令
            const commands = {
                help: {
                    desc: "显示所有可用命令",
                    execute: () => {
                        addConsoleMessage("可用命令:");
                        Object.keys(commands).forEach(cmd => {
                            addConsoleMessage(`  ${cmd} - ${commands[cmd].desc}`);
                        });
                    }
                },
                clear: {
                    desc: "清空控制台输出",
                    execute: () => {
                        consoleOutput.innerHTML = "> 控制台已清空<br>";
                    }
                },
                status: {
                    desc: "显示飞船状态",
                    execute: () => {
                        addConsoleMessage("飞船状态:");
                        addConsoleMessage("  船体完整性: 82%");
                        addConsoleMessage("  能量核心: 67%");
                        addConsoleMessage("  护盾强度: 95%");
                        addConsoleMessage("  当前位置: 半人马座α星附近");
                    }
                },
                scan: {
                    desc: "执行深空扫描",
                    execute: () => {
                        addConsoleMessage("> 启动深空扫描...");
                        
                        setTimeout(() => {
                            addConsoleMessage("> 扫描完成:");
                            addConsoleMessage("  发现 3 个恒星系统");
                            addConsoleMessage("  发现 12 颗行星");
                            addConsoleMessage("  检测到异常能量信号");
                        }, 1000);
                    }
                },
                warp: {
                    desc: "启动曲速引擎",
                    execute: () => {
                        activateWarpDrive();
                    }
                },
                date: {
                    desc: "显示当前星历",
                    execute: () => {
                        const now = new Date();
                        addConsoleMessage(`> 当前星历: ${now.toLocaleDateString()} ${now.toLocaleTimeString()}`);
                    }
                },
                systems: {
                    desc: "显示系统状态",
                    execute: () => {
                        addConsoleMessage("系统状态:");
                        addConsoleMessage("  导航系统: 在线");
                        addConsoleMessage("  通讯系统: 在线");
                        addConsoleMessage("  传感器: 在线");
                        addConsoleMessage("  武器系统: 待机");
                        addConsoleMessage("  防御系统: 在线");
                    }
                }
            };
            
            // 添加控制台消息
            window.addConsoleMessage = function(message) {
                consoleOutput.innerHTML += message + "<br>";
                consoleOutput.scrollTop = consoleOutput.scrollHeight;
            };
            
            // 执行命令
            function executeCommand(input) {
                if (!input.trim()) return;
                
                // 添加到历史
                commandHistory.push(input);
                historyIndex = commandHistory.length;
                
                // 显示输入的命令
                addConsoleMessage(`<span style="color: var(--primary)">> ${input}</span>`);
                
                // 解析命令
                const parts = input.trim().split(' ');
                const command = parts[0].toLowerCase();
                const args = parts.slice(1);
                
                // 执行命令
                if (commands[command]) {
                    try {
                        commands[command].execute(args);
                    } catch (error) {
                        addConsoleMessage(`错误: ${error.message}`);
                    }
                } else {
                    addConsoleMessage(`未知命令: ${command}`);
                    addConsoleMessage("输入 'help' 查看可用命令");
                }
            }
            
            // 回车键提交
            consoleInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    const input = consoleInput.value.trim();
                    if (input) {
                        executeCommand(input);
                        consoleInput.value = '';
                    }
                } else if (e.key === 'ArrowUp') {
                    // 上箭头：历史命令
                    if (commandHistory.length > 0) {
                        if (historyIndex > 0) historyIndex--;
                        consoleInput.value = commandHistory[historyIndex] || '';
                    }
                    e.preventDefault();
                } else if (e.key === 'ArrowDown') {
                    // 下箭头：历史命令
                    if (commandHistory.length > 0) {
                        if (historyIndex < commandHistory.length - 1) {
                            historyIndex++;
                            consoleInput.value = commandHistory[historyIndex] || '';
                        } else {
                            historyIndex = commandHistory.length;
                            consoleInput.value = '';
                        }
                    }
                    e.preventDefault();
                }
            });
            
            // 提交按钮
            consoleSubmit.addEventListener('click', () => {
                const input = consoleInput.value.trim();
                if (input) {
                    executeCommand(input);
                    consoleInput.value = '';
                }
            });
            
            // 初始消息
            setTimeout(() => {
                addConsoleMessage("> 深空扫描检测到异常能量波动");
                addConsoleMessage("> 建议进行详细调查");
            }, 3000);
        }

        // ===== 6. 飞船控制系统 =====
        function initControls() {
            const warpBtn = document.getElementById('warpBtn');
            const stopBtn = document.getElementById('stopBtn');
            const speedSlider = document.getElementById('speedSlider');
            const speedValue = document.getElementById('speedValue');
            const engineSlider = document.getElementById('engineSlider');
            const shieldSlider = document.getElementById('shieldSlider');
            const weaponSlider = document.getElementById('weaponSlider');
            const enginePower = document.getElementById('enginePower');
            const shieldPower = document.getElementById('shieldPower');
            const weaponPower = document.getElementById('weaponPower');
            
            // 曲速引擎
            warpBtn.addEventListener('click', activateWarpDrive);
            
            // 紧急停止
            stopBtn.addEventListener('click', function() {
                addConsoleMessage("> 紧急停止程序启动");
                addAlert("紧急停止", "飞船正在减速，所有系统转入待机模式", "warning");
                
                // 重置速度滑块
                speedSlider.value = 0;
                updateSpeedValue();
                
                // 添加视觉效果
                document.body.style.animation = 'none';
                setTimeout(() => {
                    document.body.style.animation = '';
                }, 10);
            });
            
            // 速度滑块
            speedSlider.addEventListener('input', updateSpeedValue);
            
            function updateSpeedValue() {
                const value = speedSlider.value;
                let speedText;
                
                if (value < 20) {
                    speedText = "亚光速";
                } else if (value < 40) {
                    speedText = "0.1c";
                } else if (value < 60) {
                    speedText = "0.3c";
                } else if (value < 80) {
                    speedText = "0.7c";
                } else {
                    speedText = "曲速 1.2";
                }
                
                speedValue.textContent = speedText;
            }
            
            // 能源分配滑块
            engineSlider.addEventListener('input', function() {
                enginePower.textContent = `${this.value}%`;
                updatePowerDistribution();
            });
            
            shieldSlider.addEventListener('input', function() {
                shieldPower.textContent = `${this.value}%`;
                updatePowerDistribution();
            });
            
            weaponSlider.addEventListener('input', function() {
                weaponPower.textContent = `${this.value}%`;
                updatePowerDistribution();
            });
            
            function updatePowerDistribution() {
                const total = parseInt(engineSlider.value) + parseInt(shieldSlider.value) + parseInt(weaponSlider.value);
                
                if (total > 100) {
                    // 调整其他滑块
                    const excess = total - 100;
                    if (parseInt(engineSlider.value) > excess) {
                        engineSlider.value = parseInt(engineSlider.value) - excess;
                        enginePower.textContent = `${engineSlider.value}%`;
                    } else if (parseInt(shieldSlider.value) > excess) {
                        shieldSlider.value = parseInt(shieldSlider.value) - excess;
                        shieldPower.textContent = `${shieldSlider.value}%`;
                    } else {
                        weaponSlider.value = parseInt(weaponSlider.value) - excess;
                        weaponPower.textContent = `${weaponSlider.value}%`;
                    }
                }
                
                addConsoleMessage(`> 能源分配更新: 引擎 ${engineSlider.value}%, 护盾 ${shieldSlider.value}%, 武器 ${weaponSlider.value}%`);
            }
            
            // 初始化值
            updateSpeedValue();
        }
        
        function activateWarpDrive() {
            addConsoleMessage("> 启动曲速引擎...");
            addConsoleMessage("> 正在生成曲速场...");
            addConsoleMessage("> 准备进入超光速航行");
            
            addAlert("曲速航行", "正在进入曲速空间，预计到达时间: 15分钟", "success");
            
            // 视觉效果
            document.body.style.animation = 'warpEffect 0.5s infinite alternate';
            
            // 创建曲速特效
            createWarpEffect();
            
            // 更新速度
            document.getElementById('speedSlider').value = 95;
            document.getElementById('speedValue').textContent = "曲速 9.2";
            
            // 5秒后停止特效
            setTimeout(() => {
                document.body.style.animation = '';
                addConsoleMessage("> 曲速航行稳定，所有系统正常");
            }, 5000);
        }
        
        function createWarpEffect() {
            const container = document.querySelector('.container');
            
            // 创建星星流效果
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'particle';
                star.style.width = `${Math.random() * 4 + 1}px`;
                star.style.height = star.style.width;
                star.style.background = '#FFFFFF';
                star.style.boxShadow = '0 0 10px #00f7ff';
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.animation = `warpStar ${Math.random() * 0.5 + 0.3}s linear`;
                
                container.appendChild(star);
                
                // 移除粒子
                setTimeout(() => {
                    if (star.parentNode) {
                        star.parentNode.removeChild(star);
                    }
                }, 500);
            }
            
            // 添加CSS动画
            if (!document.querySelector('#warpAnimations')) {
                const style = document.createElement('style');
                style.id = 'warpAnimations';
                style.textContent = `
                    @keyframes warpEffect {
                        0% { filter: hue-rotate(0deg) brightness(1); }
                        100% { filter: hue-rotate(180deg) brightness(1.5); }
                    }
                    
                    @keyframes warpStar {
                        0% { 
                            transform: translateX(0) translateY(0) scale(1);
                            opacity: 1;
                        }
                        100% { 
                            transform: translateX(${Math.random() > 0.5 ? '' : '-'}${Math.random() * 200 + 100}px) 
                                     translateY(${Math.random() > 0.5 ? '' : '-'}${Math.random() * 200 + 100}px) 
                                     scale(0);
                            opacity: 0;
                        }
                    }
                `;
                document.head.appendChild(style);
            }
        }

        // ===== 7. 警报系统 =====
        function initAlerts() {
            const alertsContainer = document.getElementById('alertsContainer');
            const silenceBtn = document.getElementById('silenceAlerts');
            const scanBtn = document.getElementById('scanArea');
            
            // 初始警报
            const initialAlerts = [
                { title: "传感器检测到异常", message: "附近区域检测到重力异常", level: "warning" },
                { title: "维护提醒", message: "曲速引擎需要例行维护", level: "info" },
                { title: "通讯信号", message: "接收到联盟通讯信号", level: "info" }
            ];
            
            initialAlerts.forEach(alert => {
                addAlert(alert.title, alert.message, alert.level);
            });
            
            // 添加警报函数
            window.addAlert = function(title, message, level = 'info') {
                const alertElement = document.createElement('div');
                alertElement.className = 'alert-item';
                alertElement.style.padding = '12px';
                alertElement.style.marginBottom = '10px';
                alertElement.style.borderRadius = '8px';
                alertElement.style.border = '1px solid';
                alertElement.style.display = 'flex';
                alertElement.style.alignItems = 'center';
                alertElement.style.gap = '10px';
                alertElement.style.animation = 'fadeIn 0.5s ease';
                
                // 设置颜色
                let borderColor, bgColor, icon;
                
                switch(level) {
                    case 'danger':
                        borderColor = 'var(--danger)';
                        bgColor = 'rgba(255, 71, 87, 0.1)';
                        icon = 'fas fa-exclamation-circle';
                        break;
                    case 'warning':
                        borderColor = 'var(--warning)';
                        bgColor = 'rgba(255, 179, 71, 0.1)';
                        icon = 'fas fa-exclamation-triangle';
                        break;
                    case 'success':
                        borderColor = 'var(--success)';
                        bgColor = 'rgba(0, 255, 157, 0.1)';
                        icon = 'fas fa-check-circle';
                        break;
                    default:
                        borderColor = 'var(--primary)';
                        bgColor = 'rgba(0, 247, 255, 0.1)';
                        icon = 'fas fa-info-circle';
                }
                
                alertElement.style.borderColor = borderColor;
                alertElement.style.background = bgColor;
                
                alertElement.innerHTML = `
                    <i class="${icon}" style="color: ${borderColor}; font-size: 18px;"></i>
                    <div style="flex-grow: 1;">
                        <div style="font-weight: 600; color: ${borderColor};">${title}</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">${message}</div>
                    </div>
                    <button class="dismiss-btn" style="background: none; border: none; color: var(--text-secondary); cursor: pointer;">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                
                alertsContainer.appendChild(alertElement);
                
                // 添加关闭按钮事件
                const dismissBtn = alertElement.querySelector('.dismiss-btn');
                dismissBtn.addEventListener('click', () => {
                    alertElement.style.animation = 'fadeOut 0.5s ease';
                    setTimeout(() => {
                        if (alertElement.parentNode) {
                            alertElement.parentNode.removeChild(alertElement);
                        }
                    }, 500);
                });
                
                // 自动移除（除非是危险警报）
                if (level !== 'danger') {
                    setTimeout(() => {
                        if (alertElement.parentNode) {
                            alertElement.style.animation = 'fadeOut 0.5s ease';
                            setTimeout(() => {
                                if (alertElement.parentNode) {
                                    alertElement.parentNode.removeChild(alertElement);
                                }
                            }, 500);
                        }
                    }, 10000);
                }
                
                // 添加CSS动画
                if (!document.querySelector('#alertAnimations')) {
                    const style = document.createElement('style');
                    style.id = 'alertAnimations';
                    style.textContent = `
                        @keyframes fadeIn {
                            from { opacity: 0; transform: translateY(-10px); }
                            to { opacity: 1; transform: translateY(0); }
                        }
                        
                        @keyframes fadeOut {
                            from { opacity: 1; transform: translateY(0); }
                            to { opacity: 0; transform: translateY(-10px); }
                        }
                    `;
                    document.head.appendChild(style);
                }
            };
            
            // 静音警报
            silenceBtn.addEventListener('click', function() {
                addConsoleMessage("> 警报系统已静音");
                alertsContainer.innerHTML = '<div style="text-align: center; padding: 20px; color: var(--text-secondary);">无活动警报</div>';
            });
            
            // 区域扫描
            scanBtn.addEventListener('click', function() {
                addConsoleMessage("> 启动区域扫描...");
                
                setTimeout(() => {
                    const threats = Math.random() > 0.7;
                    
                    if (threats) {
                        addAlert("威胁检测", "检测到潜在敌对信号", "danger");
                        addConsoleMessage("> 扫描完成: 检测到潜在威胁");
                    } else {
                        addAlert("扫描完成", "区域安全，无威胁检测", "success");
                        addConsoleMessage("> 扫描完成: 区域安全");
                    }
                }, 2000);
            });
        }

        // ===== 8. 船员系统 =====
        function initCrew() {
            const crewContainer = document.getElementById('crewContainer');
            
            const crewMembers = [
                {
                    name: "亚历克斯·陈",
                    role: "舰长",
                    department: "指挥",
                    status: "在线",
                    avatar: "👨‍🚀"
                },
                {
                    name: "玛雅·索伦森",
                    role: "科学官",
                    department: "科学研究",
                    status: "忙碌",
                    avatar: "👩‍🔬"
                },
                {
                    name: "杰克·奥马利",
                    role: "首席工程师",
                    department: "工程",
                    status: "在线",
                    avatar: "👨‍🔧"
                },
                {
                    name: "莉娜·沃尔科夫",
                    role: "安全官",
                    department: "安全",
                    status: "巡逻中",
                    avatar: "👩‍✈️"
                },
                {
                    name: "大卫·田中",
                    role: "导航员",
                    department: "航行",
                    status: "在线",
                    avatar: "🧑‍✈️"
                },
                {
                    name: "萨曼莎·琼斯",
                    role: "医务官",
                    department: "医疗",
                    status: "待命",
                    avatar: "👩‍⚕️"
                }
            ];
            
            // 渲染船员卡片
            crewMembers.forEach(member => {
                const crewCard = document.createElement('div');
                crewCard.className = 'control-group';
                crewCard.style.padding = '15px';
                
                crewCard.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div style="font-size: 32px;">${member.avatar}</div>
                        <div style="flex-grow: 1;">
                            <div style="font-weight: 600; font-size: 16px;">${member.name}</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">${member.role}</div>
                            <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                                <span style="font-size: 12px; background: rgba(0, 247, 255, 0.1); padding: 3px 8px; border-radius: 10px;">${member.department}</span>
                                <span style="font-size: 12px; color: ${member.status === '在线' ? 'var(--success)' : 'var(--warning)'}">${member.status}</span>
                            </div>
                        </div>
                    </div>
                `;
                
                crewContainer.appendChild(crewCard);
            });
        }

        // ===== 9. 物资仓库 =====
        function initInventory() {
            const inventoryTab = document.getElementById('inventory-tab');
            
            const inventoryItems = [
                { name: "反物质燃料", amount: "2,500 升", capacity: "85%", color: "#FF4757" },
                { name: "食物补给", amount: "180 天", capacity: "90%", color: "#00FF9D" },
                { name: "医疗用品", amount: "充足", capacity: "100%", color: "#00BFFF" },
                { name: "备用零件", amount: "342 件", capacity: "65%", color: "#9D4EDD" },
                { name: "饮用水", amount: "1,200 升", capacity: "80%", color: "#00F7FF" },
                { name: "科研样本", amount: "78 个", capacity: "40%", color: "#FFB347" },
                { name: "武器弹药", amount: "标准", capacity: "75%", color: "#FF6347" },
                { name: "稀有矿物", amount: "4.2 吨", capacity: "30%", color: "#FFD700" }
            ];
            
            // 渲染物资项目
            inventoryItems.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'control-group';
                itemElement.style.padding = '20px';
                itemElement.style.textAlign = 'center';
                
                itemElement.innerHTML = `
                    <div style="font-size: 24px; margin-bottom: 10px;">📦</div>
                    <div style="font-weight: 600; margin-bottom: 5px;">${item.name}</div>
                    <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 10px;">${item.amount}</div>
                    <div style="height: 6px; background: rgba(255, 255, 255, 0.1); border-radius: 3px; overflow: hidden;">
                        <div style="height: 100%; background: ${item.color}; width: ${item.capacity};"></div>
                    </div>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 5px;">容量: ${item.capacity}</div>
                `;
                
                inventoryTab.querySelector('div').appendChild(itemElement);
            });
        }

        // ===== 10. 任务计时器 =====
        function startMissionTimer() {
            const missionTime = document.querySelector('.mission-time');
            let seconds = 0;
            let minutes = 32;
            let hours = 14;
            
            setInterval(() => {
                seconds++;
                
                if (seconds >= 60) {
                    seconds = 0;
                    minutes++;
                    
                    if (minutes >= 60) {
                        minutes = 0;
                        hours++;
                        
                        if (hours >= 24) {
                            hours = 0;
                        }
                    }
                }
                
                // 格式化时间
                const timeString = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                missionTime.textContent = timeString;
                
                // 每5分钟添加一个随机事件
                if (minutes % 5 === 0 && seconds === 0) {
                    triggerRandomEvent();
                }
            }, 1000);
        }
        
        function triggerRandomEvent() {
            const events = [
                {
                    type: 'scan',
                    message: '深空扫描检测到新的恒星系统',
                    alert: '发现新星系'
                },
                {
                    type: 'communication',
                    message: '接收到联盟总部的通讯',
                    alert: '联盟通讯'
                },
                {
                    type: 'anomaly',
                    message: '检测到空间异常，建议调查',
                    alert: '空间异常'
                },
                {
                    type: 'resource',
                    message: '传感器发现稀有矿物信号',
                    alert: '资源发现'
                }
            ];
            
            const event = events[Math.floor(Math.random() * events.length)];
            
            addConsoleMessage(`> ${event.message}`);
            addAlert(event.alert, event.message, 'info');
        }

        // ===== 11. 粒子特效 =====
        function createParticles() {
            const container = document.querySelector('.container');
            
            // 创建背景粒子
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.width = `${Math.random() * 3 + 1}px`;
                particle.style.height = particle.style.width;
                particle.style.background = `rgba(0, 247, 255, ${Math.random() * 0.3 + 0.1})`;
                particle.style.borderRadius = '50%';
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.animation = `float ${Math.random() * 10 + 10}s infinite linear`;
                particle.style.animationDelay = `${Math.random() * 5}s`;
                
                container.appendChild(particle);
            }
            
            // 添加浮动动画
            if (!document.querySelector('#particleAnimations')) {
                const style = document.createElement('style');
                style.id = 'particleAnimations';
                style.textContent = `
                    @keyframes float {
                        0% {
                            transform: translateY(0) translateX(0);
                            opacity: ${Math.random() * 0.5 + 0.2};
                        }
                        25% {
                            transform: translateY(${Math.random() * 20 - 10}px) translateX(${Math.random() * 20 - 10}px);
                        }
                        50% {
                            transform: translateY(${Math.random() * 40 - 20}px) translateX(${Math.random() * 40 - 20}px);
                            opacity: ${Math.random() * 0.8 + 0.2};
                        }
                        75% {
                            transform: translateY(${Math.random() * 20 - 10}px) translateX(${Math.random() * 20 - 10}px);
                        }
                        100% {
                            transform: translateY(0) translateX(0);
                            opacity: ${Math.random() * 0.5 + 0.2};
                        }
                    }
                `;
                document.head.appendChild(style);
            }
        }

        // ===== 12. 键盘快捷键 =====
        document.addEventListener('keydown', function(e) {
            // F1 - 显示帮助
            if (e.key === 'F1') {
                e.preventDefault();
                document.getElementById('consoleInput').value = 'help';
                document.getElementById('consoleSubmit').click();
            }
            
            // F2 - 切换星系图
            if (e.key === 'F2') {
                e.preventDefault();
                document.querySelector('[data-tab="galaxy"]').click();
            }
            
            // F5 - 扫描
            if (e.key === 'F5') {
                e.preventDefault();
                document.getElementById('scanArea').click();
            }
            
            // Space + W - 曲速
            if (e.key === 'w' && e.ctrlKey) {
                e.preventDefault();
                activateWarpDrive();
            }
            
            // Space + S - 停止
            if (e.key === 's' && e.ctrlKey) {
                e.preventDefault();
                document.getElementById('stopBtn').click();
            }
        });

        // 初始化完成
        console.log('深空探索控制中心已完全启动');
        console.log('快捷键: F1=帮助, F2=星系图, F5=扫描, Ctrl+W=曲速, Ctrl+S=停止');
    </script>
</body>
</html>