<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>故事库 - 单词故事学习系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4f46e5;
            --primary-light: #6366f1;
            --primary-dark: #4338ca;
            --secondary-color: #10b981;
            --secondary-light: #34d399;
            --secondary-dark: #059669;
            --accent-color: #f59e0b;
            --accent-light: #fbbf24;
            --accent-dark: #d97706;
            --danger-color: #ef4444;
            --danger-light: #f87171;
            --danger-dark: #dc2626;
            --background-light: #f8fafc;
            --background-white: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-light: #94a3b8;
            --border-color: #e2e8f0;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.12);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            --transition-fast: 0.2s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', 'Noto Sans SC', sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: linear-gradient(135deg, #f0f4ff 0%, #e0e7ff 100%);
            min-height: 100vh;
            padding: 0;
        }

        /* 导航栏样式 */
        .navbar {
            background: var(--background-white);
            padding: 15px 40px;
            box-shadow: var(--shadow-md);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
        }

        .navbar-brand i {
            font-size: 1.8rem;
        }

        .nav-links {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .nav-link {
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 500;
            padding: 8px 16px;
            border-radius: var(--radius-md);
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--primary-color);
            background: rgba(79, 70, 229, 0.1);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 16px;
            background: rgba(79, 70, 229, 0.1);
            border-radius: var(--radius-md);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--primary-light), var(--primary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        /* 主容器 */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* 页面标题 */
        .page-header {
            margin-bottom: 40px;
            text-align: center;
        }

        .page-title {
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .page-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }

        /* 搜索和筛选区域 */
        .filters-section {
            background: var(--background-white);
            padding: 25px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            margin-bottom: 30px;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: center;
        }

        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 20px 12px 45px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: 1rem;
            transition: all var(--transition-normal);
            background: var(--background-light);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
        }

        .filter-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 12px 20px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            background: var(--background-white);
            color: var(--text-primary);
            font-size: 0.95rem;
            cursor: pointer;
            transition: all var(--transition-normal);
            min-width: 150px;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .filter-btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, var(--primary-light), var(--primary-color));
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-btn:hover {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* 故事统计 */
        .stories-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px 20px;
            background: var(--background-light);
            border-radius: var(--radius-md);
        }

        .stats-info {
            display: flex;
            gap: 30px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .stat-value {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .view-toggle {
            display: flex;
            gap: 5px;
            background: var(--background-white);
            padding: 5px;
            border-radius: var(--radius-md);
            border: 1px solid var(--border-color);
        }

        .view-btn {
            padding: 8px 15px;
            border: none;
            background: transparent;
            border-radius: var(--radius-sm);
            cursor: pointer;
            color: var(--text-secondary);
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .view-btn:hover {
            color: var(--primary-color);
            background: rgba(79, 70, 229, 0.1);
        }

        .view-btn.active {
            background: var(--primary-color);
            color: white;
        }

        /* 故事网格布局 */
        .stories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        /* 故事列表布局 */
        .stories-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 40px;
        }

        /* 故事卡片 */
        .story-card {
            background: var(--background-white);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: all var(--transition-normal);
            border: 1px solid var(--border-color);
            position: relative;
        }

        .story-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .story-card-grid {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .story-card-list {
            display: flex;
            flex-direction: row;
        }

        .story-image {
            height: 180px;
            background: linear-gradient(135deg, var(--primary-light), var(--primary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }

        .story-card-list .story-image {
            width: 200px;
            height: auto;
            flex-shrink: 0;
        }

        .story-content {
            padding: 25px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .story-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .story-category {
            display: inline-block;
            padding: 5px 12px;
            background: rgba(79, 70, 229, 0.1);
            color: var(--primary-color);
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .story-difficulty {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .difficulty-beginner {
            background: rgba(16, 185, 129, 0.1);
            color: var(--secondary-color);
        }

        .difficulty-intermediate {
            background: rgba(245, 158, 11, 0.1);
            color: var(--accent-color);
        }

        .difficulty-advanced {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger-color);
        }

        .story-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-primary);
            line-height: 1.3;
        }

        .story-desc {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 20px;
            font-size: 0.95rem;
            flex: 1;
        }

        .story-card-list .story-desc {
            max-height: 60px;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .story-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .story-progress {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .progress-bar {
            flex: 1;
            height: 6px;
            background: var(--border-color);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary-light), var(--secondary-color));
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .story-actions {
            display: flex;
            gap: 10px;
        }

        .story-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-weight: 500;
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
            text-align: center;
        }

        .story-btn.primary {
            background: linear-gradient(135deg, var(--primary-light), var(--primary-color));
            color: white;
        }

        .story-btn.primary:hover {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            transform: translateY(-2px);
        }

        .story-btn.secondary {
            background: var(--background-light);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }

        .story-btn.secondary:hover {
            background: var(--border-color);
            color: var(--text-primary);
        }

        .completed-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, var(--secondary-light), var(--secondary-color));
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
            z-index: 10;
        }

        /* 分页控件 */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 40px;
            padding: 20px;
        }

        .pagination-btn {
            padding: 10px 15px;
            border: 1px solid var(--border-color);
            background: var(--background-white);
            border-radius: var(--radius-md);
            cursor: pointer;
            color: var(--text-primary);
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            gap: 5px;
            min-width: 40px;
            justify-content: center;
        }

        .pagination-btn:hover:not(.disabled) {
            border-color: var(--primary-color);
            color: var(--primary-color);
            background: rgba(79, 70, 229, 0.1);
        }

        .pagination-btn.active {
            background: linear-gradient(135deg, var(--primary-light), var(--primary-color));
            color: white;
            border-color: var(--primary-color);
        }

        .pagination-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-numbers {
            display: flex;
            gap: 5px;
        }

        .page-info {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* 页脚 */
        footer {
            text-align: center;
            padding: 40px 20px;
            border-top: 1px solid var(--border-color);
            color: var(--text-light);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
        }

        .footer-link {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color var(--transition-normal);
        }

        .footer-link:hover {
            color: var(--primary-color);
        }

        /* 装饰元素 */
        .decoration {
            position: fixed;
            z-index: -1;
            opacity: 0.1;
        }

        .decoration-1 {
            top: 10%;
            left: 5%;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            animation: float 20s ease-in-out infinite;
        }

        .decoration-2 {
            bottom: 10%;
            right: 5%;
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            border-radius: 70% 30% 30% 70% / 70% 70% 30% 30%;
            animation: float 25s ease-in-out infinite reverse;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(180deg);
            }
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .navbar {
                padding: 15px 20px;
                flex-direction: column;
                gap: 15px;
            }

            .nav-links {
                flex-direction: column;
                gap: 10px;
                width: 100%;
            }

            .nav-link {
                width: 100%;
                justify-content: center;
            }

            .page-title {
                font-size: 2.2rem;
            }

            .filters-section {
                flex-direction: column;
                align-items: stretch;
            }

            .search-box {
                min-width: 100%;
            }

            .filter-group {
                width: 100%;
                justify-content: space-between;
            }

            .filter-select {
                flex: 1;
                min-width: 0;
            }

            .story-card-list {
                flex-direction: column;
            }

            .story-card-list .story-image {
                width: 100%;
                height: 150px;
            }

            .stories-grid {
                grid-template-columns: 1fr;
            }

            .stories-stats {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }

            .stats-info {
                justify-content: space-between;
            }

            .main-container {
                padding: 20px 15px;
            }
        }

        /* 空状态提示 */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-light);
            grid-column: 1 / -1;
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: var(--border-color);
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--text-secondary);
        }

        .empty-state p {
            max-width: 400px;
            margin: 0 auto 20px;
        }
    </style>
</head>
<body>
    <!-- 装饰元素 -->
    <div class="decoration decoration-1"></div>
    <div class="decoration decoration-2"></div>
    
    <!-- 导航栏 -->
    <nav class="navbar">
        <a href="#" class="navbar-brand">
            <i class="fas fa-book-open"></i>
            <span>单词故事学习系统</span>
        </a>
        <div class="nav-links">
            <a href="word_index.html" class="nav-link">
                <i class="fas fa-home"></i>
                <span>首页</span>
            </a>
            <a href="word_story.html" class="nav-link" target="_blank">
                <i class="fas fa-graduation-cap"></i>
                <span>学习中心</span>
            </a>
            <a href="#" class="nav-link active">
                <i class="fas fa-book"></i>
                <span>推荐故事库</span>
            </a>
            <div class="user-profile">
                <div class="user-avatar">李</div>
                <div>
                    <div class="user-name">李明</div>
                    <div class="user-level">初级学习者</div>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主内容区 -->
    <div class="main-container">
        <!-- 页面标题 -->
        <div class="page-header">
            <h1 class="page-title">故事库</h1>
            <p class="page-subtitle">探索各种主题的单词故事，选择您感兴趣的开始学习</p>
        </div>

        <!-- 搜索和筛选区域 -->
        <div class="filters-section">
            <div class="search-box">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" id="searchInput" placeholder="搜索故事标题或描述...">
            </div>
            <div class="filter-group">
                <select class="filter-select" id="categoryFilter">
                    <option value="">所有分类</option>
                    <option value="冒险">冒险</option>
                    <option value="科幻">科幻</option>
                    <option value="自然">自然</option>
                    <option value="历史">历史</option>
                    <option value="生活">生活</option>
                    <option value="奇幻">奇幻</option>
                </select>
                <select class="filter-select" id="difficultyFilter">
                    <option value="">所有难度</option>
                    <option value="初级">初级</option>
                    <option value="中级">中级</option>
                    <option value="高级">高级</option>
                </select>
                <select class="filter-select" id="statusFilter">
                    <option value="">所有状态</option>
                    <option value="未开始">未开始</option>
                    <option value="学习中">学习中</option>
                    <option value="已完成">已完成</option>
                </select>
                <button class="filter-btn" id="applyFilters">
                    <i class="fas fa-filter"></i>
                    <span>筛选</span>
                </button>
            </div>
        </div>

        <!-- 故事统计和视图切换 -->
        <div class="stories-stats">
            <div class="stats-info">
                <div class="stat-item">
                    <span class="stat-label">故事总数:</span>
                    <span class="stat-value" id="totalStories">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">显示故事:</span>
                    <span class="stat-value" id="displayedStories">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">总单词数:</span>
                    <span class="stat-value" id="totalWords">0</span>
                </div>
            </div>
            <div class="view-toggle">
                <button class="view-btn active" id="gridView" title="网格视图">
                    <i class="fas fa-th"></i>
                </button>
                <button class="view-btn" id="listView" title="列表视图">
                    <i class="fas fa-list"></i>
                </button>
            </div>
        </div>

        <!-- 故事列表容器 -->
        <div id="storiesContainer" class="stories-grid">
            <!-- 故事卡片将通过JS动态生成 -->
        </div>

        <!-- 分页控件 -->
        <div class="pagination">
            <button class="pagination-btn" id="prevPage" disabled>
                <i class="fas fa-chevron-left"></i>
                <span>上一页</span>
            </button>
            <div class="page-numbers" id="pageNumbers">
                <!-- 页码将通过JS动态生成 -->
            </div>
            <button class="pagination-btn" id="nextPage">
                <span>下一页</span>
                <i class="fas fa-chevron-right"></i>
            </button>
            <div class="page-info">
                第 <span id="currentPage">1</span> 页，共 <span id="totalPages">1</span> 页
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <p>
                <i class="fas fa-code"></i>
                <span>单词故事学习系统 © 2023 | 让单词学习变得有趣</span>
                <i class="fas fa-heart" style="color: #ef4444;"></i>
            </p>
            <div class="footer-links">
                <a href="#" class="footer-link">首页</a>
                <a href="https://javaboy2012.github.io/word3.html" class="footer-link" target="_blank">学习中心</a>
                <a href="#" class="footer-link">故事库</a>
                <a href="#" class="footer-link">关于我们</a>
                <a href="#" class="footer-link">帮助中心</a>
            </div>
            <p>本系统为MVP演示版本，所有功能在一个HTML文件中实现</p>
        </div>
    </footer>

    <script>
        // ================================
        // 故事数据 - JS格式存储
        // ================================
        const storiesData = [
            {
                id: 1,
                title: "神秘森林的冒险",
                description: "小狐狸艾米在神秘森林中寻找传说中的金苹果，经历各种奇遇和挑战。学习自然和冒险相关的词汇，适合初学者。",
                category: "冒险",
                difficulty: "初级",
                wordCount: 10,
                progress: 60,
                status: "学习中",
                completed: false,
                imageIcon: "fas fa-mountain",
                tags: ["自然", "动物", "冒险"],
                createdDate: "2023-10-01",
                learningLink: "https://javaboy2012.github.io/word3.html"
            },
            {
                id: 2,
                title: "太空探索之旅",
                description: "跟随宇航员一起探索神秘的外太空，参观国际空间站，学习天文和科技相关的专业词汇。",
                category: "科幻",
                difficulty: "中级",
                wordCount: 15,
                progress: 30,
                status: "学习中",
                completed: false,
                imageIcon: "fas fa-rocket",
                tags: ["科技", "天文", "未来"],
                createdDate: "2023-10-05",
                learningLink: "https://javaboy2012.github.io/word3.html"
            },
            {
                id: 3,
                title: "海底世界奇遇",
                description: "潜入深海，探索神秘的海底世界，与各种海洋生物相遇，学习海洋生态相关词汇。",
                category: "自然",
                difficulty: "初级",
                wordCount: 8,
                progress: 100,
                status: "已完成",
                completed: true,
                imageIcon: "fas fa-fish",
                tags: ["海洋", "生物", "生态"],
                createdDate: "2023-09-20",
                learningLink: "https://javaboy2012.github.io/word3.html"
            },
            {
                id: 4,
                title: "古代文明探秘",
                description: "穿越时空，探索古埃及金字塔、玛雅文明和希腊神话，学习历史和文化相关词汇。",
                category: "历史",
                difficulty: "中级",
                wordCount: 18,
                progress: 20,
                status: "学习中",
                completed: false,
                imageIcon: "fas fa-landmark",
                tags: ["历史", "文化", "考古"],
                createdDate: "2023-10-10",
                learningLink: "https://javaboy2012.github.io/word3.html"
            },
            {
                id: 5,
                title: "城市生活日记",
                description: "现代都市生活中的日常故事，涵盖交通、购物、工作等场景的实用英语词汇。",
                category: "生活",
                difficulty: "初级",
                wordCount: 12,
                progress: 0,
                status: "未开始",
                completed: false,
                imageIcon: "fas fa-city",
                tags: ["日常", "实用", "城市"],
                createdDate: "2023-10-15",
                learningLink: "https://javaboy2012.github.io/word3.html"
            },
            {
                id: 6,
                title: "奇幻魔法学校",
                description: "在魔法学校学习各种魔法咒语和奇幻世界的专用词汇，适合喜欢奇幻题材的学习者。",
                category: "奇幻",
                difficulty: "高级",
                wordCount: 20,
                progress: 80,
                status: "学习中",
                completed: false,
                imageIcon: "fas fa-hat-wizard",
                tags: ["魔法", "奇幻", "冒险"],
                createdDate: "2023-09-25",
                learningLink: "https://javaboy2012.github.io/word3.html"
            },
            {
                id: 7,
                title: "四季变换之歌",
                description: "通过四季的变化学习自然现象和天气相关的词汇，感受大自然的美丽与神奇。",
                category: "自然",
                difficulty: "初级",
                wordCount: 9,
                progress: 45,
                status: "学习中",
                completed: false,
                imageIcon: "fas fa-tree",
                tags: ["季节", "天气", "自然"],
                createdDate: "2023-10-08",
                learningLink: "https://javaboy2012.github.io/word3.html"
            },
            {
                id: 8,
                title: "科技改变生活",
                description: "探索现代科技如何改变我们的生活，学习人工智能、互联网和智能设备相关词汇。",
                category: "科幻",
                difficulty: "中级",
                wordCount: 16,
                progress: 10,
                status: "学习中",
                completed: false,
                imageIcon: "fas fa-robot",
                tags: ["科技", "AI", "创新"],
                createdDate: "2023-10-12",
                learningLink: "https://javaboy2012.github.io/word3.html"
            },
            {
                id: 9,
                title: "世界美食之旅",
                description: "环游世界品尝各地美食，学习食物、烹饪和文化相关的英语词汇。",
                category: "生活",
                difficulty: "初级",
                wordCount: 11,
                progress: 100,
                status: "已完成",
                completed: true,
                imageIcon: "fas fa-utensils",
                tags: ["美食", "文化", "旅行"],
                createdDate: "2023-09-15",
                learningLink: "https://javaboy2012.github.io/word3.html"
            },
            {
                id: 10,
                title: "动物王国奇遇",
                description: "探索动物王国的奥秘，学习各种动物的名称、习性和栖息地相关词汇。",
                category: "自然",
                difficulty: "初级",
                wordCount: 13,
                progress: 75,
                status: "学习中",
                completed: false,
                imageIcon: "fas fa-paw",
                tags: ["动物", "自然", "生态"],
                createdDate: "2023-10-03",
                learningLink: "https://javaboy2012.github.io/word3.html"
            },
            {
                id: 11,
                title: "职业梦想探索",
                description: "了解各种职业的特点和要求，学习职业发展和职场相关的英语词汇。",
                category: "生活",
                difficulty: "中级",
                wordCount: 14,
                progress: 25,
                status: "学习中",
                completed: false,
                imageIcon: "fas fa-briefcase",
                tags: ["职业", "工作", "发展"],
                createdDate: "2023-10-18",
                learningLink: "https://javaboy2012.github.io/word3.html"
            },
            {
                id: 12,
                title: "神话传说世界",
                description: "探索世界各地的神话传说，学习神话人物和传说故事相关的词汇。",
                category: "奇幻",
                difficulty: "高级",
                wordCount: 22,
                progress: 5,
                status: "未开始",
                completed: false,
                imageIcon: "fas fa-dragon",
                tags: ["神话", "传说", "文化"],
                createdDate: "2023-10-20",
                learningLink: "https://javaboy2012.github.io/word3.html"
            },
            {
                id: 13,
                title: "运动健康生活",
                description: "学习各种运动项目和健康生活方式相关的英语词汇，培养健康生活习惯。",
                category: "生活",
                difficulty: "初级",
                wordCount: 10,
                progress: 90,
                status: "学习中",
                completed: false,
                imageIcon: "fas fa-running",
                tags: ["运动", "健康", "生活"],
                createdDate: "2023-09-28",
                learningLink: "https://javaboy2012.github.io/word3.html"
            },
            {
                id: 14,
                title: "未来城市想象",
                description: "想象未来城市的样貌，学习城市规划、可持续发展等相关词汇。",
                category: "科幻",
                difficulty: "中级",
                wordCount: 17,
                progress: 0,
                status: "未开始",
                completed: false,
                imageIcon: "fas fa-building",
                tags: ["未来", "城市", "科技"],
                createdDate: "2023-10-22",
                learningLink: "https://javaboy2012.github.io/word3.html"
            },
            {
                id: 15,
                title: "节日文化庆典",
                description: "了解世界各地的节日庆典，学习节日文化和传统习俗相关词汇。",
                category: "生活",
                difficulty: "初级",
                wordCount: 12,
                progress: 100,
                status: "已完成",
                completed: true,
                imageIcon: "fas fa-gifts",
                tags: ["节日", "文化", "传统"],
                createdDate: "2023-09-10",
                learningLink: "https://javaboy2012.github.io/word3.html"
            }
        ];

        // ================================
        // 应用状态
        // ================================
        let appState = {
            stories: [...storiesData],
            filteredStories: [...storiesData],
            currentPage: 1,
            itemsPerPage: 6,
            totalPages: 1,
            searchQuery: "",
            categoryFilter: "",
            difficultyFilter: "",
            statusFilter: "",
            viewMode: "grid", // "grid" 或 "list"
            sortBy: "id" // "id", "title", "wordCount", "progress"
        };

        // ================================
        // DOM元素
        // ================================
        const storiesContainer = document.getElementById('storiesContainer');
        const searchInput = document.getElementById('searchInput');
        const categoryFilter = document.getElementById('categoryFilter');
        const difficultyFilter = document.getElementById('difficultyFilter');
        const statusFilter = document.getElementById('statusFilter');
        const applyFiltersBtn = document.getElementById('applyFilters');
        const totalStoriesEl = document.getElementById('totalStories');
        const displayedStoriesEl = document.getElementById('displayedStories');
        const totalWordsEl = document.getElementById('totalWords');
        const gridViewBtn = document.getElementById('gridView');
        const listViewBtn = document.getElementById('listView');
        const prevPageBtn = document.getElementById('prevPage');
        const nextPageBtn = document.getElementById('nextPage');
        const pageNumbersEl = document.getElementById('pageNumbers');
        const currentPageEl = document.getElementById('currentPage');
        const totalPagesEl = document.getElementById('totalPages');

        // ================================
        // 初始化应用
        // ================================
        function initApp() {
            // 计算初始统计数据
            updateStats();
            
            // 计算总页数
            calculateTotalPages();
            
            // 渲染故事
            renderStories();
            
            // 渲染分页控件
            renderPagination();
            
            // 设置事件监听器
            setupEventListeners();
        }

        // ================================
        // 更新统计数据
        // ================================
        function updateStats() {
            const totalStories = appState.stories.length;
            const displayedStories = appState.filteredStories.length;
            const totalWords = appState.stories.reduce((sum, story) => sum + story.wordCount, 0);
            
            totalStoriesEl.textContent = totalStories;
            displayedStoriesEl.textContent = displayedStories;
            totalWordsEl.textContent = totalWords;
        }

        // ================================
        // 计算总页数
        // ================================
        function calculateTotalPages() {
            appState.totalPages = Math.ceil(appState.filteredStories.length / appState.itemsPerPage);
            if (appState.totalPages === 0) appState.totalPages = 1;
            
            // 确保当前页不超过总页数
            if (appState.currentPage > appState.totalPages) {
                appState.currentPage = appState.totalPages;
            }
        }

        // ================================
        // 获取当前页的故事
        // ================================
        function getCurrentPageStories() {
            const startIndex = (appState.currentPage - 1) * appState.itemsPerPage;
            const endIndex = startIndex + appState.itemsPerPage;
            return appState.filteredStories.slice(startIndex, endIndex);
        }

        // ================================
        // 渲染故事
        // ================================
        function renderStories() {
            const currentStories = getCurrentPageStories();
            
            // 清空容器
            storiesContainer.innerHTML = '';
            
            // 设置容器类名
            storiesContainer.className = appState.viewMode === 'grid' ? 'stories-grid' : 'stories-list';
            
            if (currentStories.length === 0) {
                // 显示空状态
                storiesContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-book-open"></i>
                        <h3>没有找到匹配的故事</h3>
                        <p>尝试调整搜索条件或筛选条件</p>
                        <button class="story-btn secondary" onclick="resetFilters()">
                            <i class="fas fa-redo"></i>
                            <span>重置筛选</span>
                        </button>
                    </div>
                `;
                return;
            }
            
            // 渲染故事卡片
            currentStories.forEach(story => {
                const storyCard = createStoryCard(story);
                storiesContainer.appendChild(storyCard);
            });
        }

        // ================================
        // 创建故事卡片
        // ================================
        function createStoryCard(story) {
            const storyCard = document.createElement('div');
            storyCard.className = `story-card story-card-${appState.viewMode}`;
            
            // 难度类名
            const difficultyClass = `difficulty-${story.difficulty === '初级' ? 'beginner' : 
                                   story.difficulty === '中级' ? 'intermediate' : 'advanced'}`;
            
            // 掌握单词数
            const masteredWords = Math.round(story.wordCount * (story.progress / 100));
            
            storyCard.innerHTML = `
                ${story.completed ? 
                    '<div class="completed-badge"><i class="fas fa-check"></i> 已完成</div>' : ''}
                <div class="story-image">
                    <i class="${story.imageIcon}"></i>
                </div>
                <div class="story-content">
                    <div class="story-header">
                        <span class="story-category">${story.category}</span>
                        <span class="story-difficulty ${difficultyClass}">${story.difficulty}</span>
                    </div>
                    <h3 class="story-title">${story.title}</h3>
                    <p class="story-desc">${story.description}</p>
                    <div class="story-meta">
                        <span><i class="fas fa-book"></i> ${story.wordCount}个单词</span>
                        <span>${masteredWords}已掌握</span>
                        <span><i class="fas fa-calendar"></i> ${story.createdDate}</span>
                    </div>
                    <div class="story-progress">
                        <span>学习进度</span>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${story.progress}%"></div>
                        </div>
                        <span>${story.progress}%</span>
                    </div>
                    <div class="story-actions">
                        <button class="story-btn secondary" onclick="viewStoryDetails(${story.id})">
                            <i class="fas fa-info-circle"></i>
                            <span>详情</span>
                        </button>
                        <a href="${story.learningLink}" class="story-btn primary" target="_blank">
                            <i class="fas fa-play"></i>
                            <span>${story.progress > 0 ? '继续学习' : '开始学习'}</span>
                        </a>
                    </div>
                </div>
            `;
            
            return storyCard;
        }

        // ================================
        // 渲染分页控件
        // ================================
        function renderPagination() {
            // 更新页面信息
            currentPageEl.textContent = appState.currentPage;
            totalPagesEl.textContent = appState.totalPages;
            
            // 更新按钮状态
            prevPageBtn.disabled = appState.currentPage === 1;
            nextPageBtn.disabled = appState.currentPage === appState.totalPages;
            
            // 清空页码
            pageNumbersEl.innerHTML = '';
            
            // 计算显示的页码范围
            let startPage = Math.max(1, appState.currentPage - 2);
            let endPage = Math.min(appState.totalPages, appState.currentPage + 2);
            
            // 确保显示5个页码（如果可能）
            if (endPage - startPage < 4) {
                if (startPage === 1) {
                    endPage = Math.min(appState.totalPages, startPage + 4);
                } else if (endPage === appState.totalPages) {
                    startPage = Math.max(1, endPage - 4);
                }
            }
            
            // 渲染页码按钮
            for (let i = startPage; i <= endPage; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = `pagination-btn ${i === appState.currentPage ? 'active' : ''}`;
                pageBtn.textContent = i;
                pageBtn.addEventListener('click', () => {
                    appState.currentPage = i;
                    renderStories();
                    renderPagination();
                });
                pageNumbersEl.appendChild(pageBtn);
            }
        }

        // ================================
        // 筛选故事
        // ================================
        function filterStories() {
            appState.filteredStories = appState.stories.filter(story => {
                // 搜索查询筛选
                if (appState.searchQuery) {
                    const query = appState.searchQuery.toLowerCase();
                    const titleMatch = story.title.toLowerCase().includes(query);
                    const descMatch = story.description.toLowerCase().includes(query);
                    const tagsMatch = story.tags.some(tag => tag.toLowerCase().includes(query));
                    if (!titleMatch && !descMatch && !tagsMatch) return false;
                }
                
                // 分类筛选
                if (appState.categoryFilter && story.category !== appState.categoryFilter) {
                    return false;
                }
                
                // 难度筛选
                if (appState.difficultyFilter && story.difficulty !== appState.difficultyFilter) {
                    return false;
                }
                
                // 状态筛选
                if (appState.statusFilter) {
                    if (appState.statusFilter === "未开始" && story.progress !== 0) return false;
                    if (appState.statusFilter === "学习中" && (story.progress === 0 || story.progress === 100)) return false;
                    if (appState.statusFilter === "已完成" && story.progress !== 100) return false;
                }
                
                return true;
            });
            
            // 重置到第一页
            appState.currentPage = 1;
            
            // 重新计算总页数
            calculateTotalPages();
            
            // 更新统计数据
            updateStats();
            
            // 重新渲染
            renderStories();
            renderPagination();
        }

        // ================================
        // 重置筛选
        // ================================
        function resetFilters() {
            appState.searchQuery = "";
            appState.categoryFilter = "";
            appState.difficultyFilter = "";
            appState.statusFilter = "";
            
            searchInput.value = "";
            categoryFilter.value = "";
            difficultyFilter.value = "";
            statusFilter.value = "";
            
            filterStories();
        }

        // ================================
        // 查看故事详情
        // ================================
        function viewStoryDetails(storyId) {
            const story = appState.stories.find(s => s.id === storyId);
            if (!story) return;
            
            const masteredWords = Math.round(story.wordCount * (story.progress / 100));
            
            alert(`故事详情\n\n` +
                  `标题: ${story.title}\n` +
                  `分类: ${story.category}\n` +
                  `难度: ${story.difficulty}\n` +
                  `单词数: ${story.wordCount}个\n` +
                  `已掌握: ${masteredWords}个单词\n` +
                  `学习进度: ${story.progress}%\n` +
                  `状态: ${story.status}\n` +
                  `创建日期: ${story.createdDate}\n` +
                  `标签: ${story.tags.join(', ')}\n\n` +
                  `描述: ${story.description}\n\n` +
                  `学习链接: ${story.learningLink}`);
        }

        // ================================
        // 设置事件监听器
        // ================================
        function setupEventListeners() {
            // 搜索输入
            searchInput.addEventListener('input', (e) => {
                appState.searchQuery = e.target.value;
                filterStories();
            });
            
            // 筛选器变更
            categoryFilter.addEventListener('change', (e) => {
                appState.categoryFilter = e.target.value;
                filterStories();
            });
            
            difficultyFilter.addEventListener('change', (e) => {
                appState.difficultyFilter = e.target.value;
                filterStories();
            });
            
            statusFilter.addEventListener('change', (e) => {
                appState.statusFilter = e.target.value;
                filterStories();
            });
            
            // 应用筛选按钮
            applyFiltersBtn.addEventListener('click', filterStories);
            
            // 视图切换
            gridViewBtn.addEventListener('click', () => {
                if (appState.viewMode !== 'grid') {
                    appState.viewMode = 'grid';
                    gridViewBtn.classList.add('active');
                    listViewBtn.classList.remove('active');
                    renderStories();
                }
            });
            
            listViewBtn.addEventListener('click', () => {
                if (appState.viewMode !== 'list') {
                    appState.viewMode = 'list';
                    listViewBtn.classList.add('active');
                    gridViewBtn.classList.remove('active');
                    renderStories();
                }
            });
            
            // 分页按钮
            prevPageBtn.addEventListener('click', () => {
                if (appState.currentPage > 1) {
                    appState.currentPage--;
                    renderStories();
                    renderPagination();
                }
            });
            
            nextPageBtn.addEventListener('click', () => {
                if (appState.currentPage < appState.totalPages) {
                    appState.currentPage++;
                    renderStories();
                    renderPagination();
                }
            });
        }

        // ================================
        // 页面加载完成后初始化应用
        // ================================
        document.addEventListener('DOMContentLoaded', initApp);

        // ================================
        // 测试功能
        // ================================
        window.testFunctions = {
            showAllStories: function() {
                console.log('所有故事:', appState.stories);
                return appState.stories;
            },
            
            addTestStory: function() {
                const newId = Math.max(...appState.stories.map(s => s.id)) + 1;
                const newStory = {
                    id: newId,
                    title: `测试故事 ${newId}`,
                    description: "这是一个测试故事，用于演示故事库功能。",
                    category: "测试",
                    difficulty: "初级",
                    wordCount: 10,
                    progress: 0,
                    status: "未开始",
                    completed: false,
                    imageIcon: "fas fa-flask",
                    tags: ["测试", "演示"],
                    createdDate: new Date().toISOString().split('T')[0],
                    learningLink: "https://javaboy2012.github.io/word3.html"
                };
                
                appState.stories.push(newStory);
                filterStories();
                console.log(`已添加测试故事: ${newStory.title}`);
            },
            
            resetAllProgress: function() {
                appState.stories.forEach(story => {
                    story.progress = 0;
                    story.status = "未开始";
                    story.completed = false;
                });
                filterStories();
                console.log('已重置所有故事进度');
            },
            
            getFilteredStories: function() {
                console.log('当前筛选后的故事:', appState.filteredStories);
                return appState.filteredStories;
            },
            
            changeItemsPerPage: function(count) {
                appState.itemsPerPage = count;
                calculateTotalPages();
                renderStories();
                renderPagination();
                console.log(`每页显示数量已更改为: ${count}`);
            }
        };

        console.log('%c🎮 测试功能可用:', 'color: #4f46e5; font-weight: bold; font-size: 14px;');
        console.log('%c  - testFunctions.showAllStories() - 显示所有故事', 'color: #64748b;');
        console.log('%c  - testFunctions.addTestStory() - 添加测试故事', 'color: #64748b;');
        console.log('%c  - testFunctions.resetAllProgress() - 重置所有故事进度', 'color: #64748b;');
        console.log('%c  - testFunctions.getFilteredStories() - 获取筛选后的故事', 'color: #64748b;');
        console.log('%c  - testFunctions.changeItemsPerPage(count) - 更改每页显示数量', 'color: #64748b;');
        console.log('%c💡 提示: 所有"开始学习"按钮都会链接到已设计好的学习页面', 'color: #10b981; font-weight: bold;');
    </script>
</body>
</html>